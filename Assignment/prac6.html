<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>String Utils Demo</title>
<style>
:root{--bg:#f7f9fc;--card:#fff;--primary:#007ACC;--muted:#6b7280;--accent:#4CAF50;--shadow:0 8px 30px rgba(2,6,23,0.06);font-family:Inter, Roboto, Arial, sans-serif}
html,body{height:100%;margin:0;background:var(--bg);display:flex;align-items:center;justify-content:center;padding:28px;box-sizing:border-box}
.container{width:100%;max-width:980px;background:var(--card);border-radius:12px;box-shadow:var(--shadow);padding:20px}
.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
h1{margin:0;color:var(--primary);font-size:18px}
.grid{display:grid;grid-template-columns:1fr 360px;gap:16px}
.panel{background:#fff;border-radius:10px;padding:12px;border:1px solid #eef2f7}
label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
textarea,input{width:100%;box-sizing:border-box;padding:10px;border-radius:8px;border:1px solid #e6eef6;outline:none;font-family:inherit}
button{background:var(--primary);color:#fff;border:0;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600}
.row{display:flex;gap:8px;align-items:center;margin-top:8px}
.out{white-space:pre-wrap;background:#fbfdff;padding:10px;border-radius:8px;border:1px solid #f0f6ff;margin-top:8px;font-size:14px;color:#102a43}
.test-list{display:flex;flex-direction:column;gap:8px;max-height:420px;overflow:auto}
.test-item{padding:8px;border-radius:8px;border:1px solid #eef2f7;background:#fff;display:flex;flex-direction:column;gap:6px}
.kv{display:flex;justify-content:space-between;gap:8px;font-size:13px;color:var(--muted)}
#24Ce052{position:fixed;top:12px;right:12px;background:var(--accent);color:#fff;padding:8px 12px;border-radius:6px;font-weight:700;box-shadow:0 4px 12px rgba(0,0,0,0.15);z-index:9999}
@media (max-width:820px){.grid{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="container" id="app-root" role="application" aria-labelledby="app-title">
  <div class="header">
    <div>
      <h1 id="app-title">String Utilities — Demo</h1>
      <div style="font-size:13px;color:var(--muted)">toTitleCase · trimExtraSpaces · wordFrequency · maskEmail</div>
    </div>
    <div style="display:flex;gap:8px;align-items:center">
      <button id="run-samples">Run Samples</button>
    </div>
  </div>

  <div class="grid">
    <div class="panel">
      <label for="input-text">Input text</label>
      <textarea id="input-text" rows="6" placeholder="Type or paste text here"></textarea>

      <div class="row" style="margin-top:12px">
        <button id="btn-title">toTitleCase</button>
        <button id="btn-trim">trimExtraSpaces</button>
        <button id="btn-freq">wordFrequency</button>
        <button id="btn-mask">maskEmail</button>
      </div>

      <div class="out" id="output">Outputs appear here</div>
    </div>

    <div class="panel">
      <label>Sample tests</label>
      <div class="test-list" id="tests"></div>
      <div style="margin-top:10px" class="kv"><span style="color:var(--muted)">Selected test input</span><span id="sel-count" style="font-weight:700">0</span></div>
    </div>
  </div>
</div>

<div id="24Ce052" aria-hidden="true">24Ce052</div>

<script>
const toTitleCase = s => String(s).toLowerCase().split(/\s+/).filter(Boolean).map(w => w[0] ? w[0].toUpperCase() + w.slice(1) : w).join(' ');
const trimExtraSpaces = s => String(s).replace(/\s+/g,' ').trim();
const wordFrequency = s => {
  const cleaned = String(s).toLowerCase().replace(/[^a-z0-9'ex@._-]+/g,' ');
  const tokens = trimExtraSpaces(cleaned).split(' ').filter(Boolean);
  return tokens.reduce((acc,t)=>{
    acc[t] = (acc[t]||0) + 1;
    return acc;
  }, {});
};
const maskEmail = s => {
  const str = String(s);
  if (!str.includes('@')) return str;
  const parts = str.split('@');
  const local = parts[0];
  const domain = parts.slice(1).join('@');
  if (local.length <= 1) return '*@' + domain;
  if (local.length === 2) return local[0] + '*' + '@' + domain;
  return local[0] + '*'.repeat(Math.max(1, local.length - 2)) + local[local.length - 1] + '@' + domain;
};

const inputEl = document.getElementById('input-text');
const outEl = document.getElementById('output');
const testsEl = document.getElementById('tests');
const selCountEl = document.getElementById('sel-count');

const samples = [
  { name:'Simple sentence', value:'  hello   world from   github copilot  ' },
  { name:'Mixed case', value:'tHis is a TeSt of TITLE case' },
  { name:'Punctuation', value:"well, this-is:odd; isn't it?" },
  { name:'Email examples', value:'alice@example.com bob.singh@domain.co.in x@short.io' },
  { name:'Hindi names', value:'rahul and priya attended the meeting in delhi' }
];

const renderTests = () => {
  testsEl.innerHTML = '';
  samples.forEach((s, i) => {
    const div = document.createElement('div');
    div.className = 'test-item';
    div.tabIndex = 0;
    div.innerHTML = `<div style="font-weight:700">${i+1}. ${s.name}</div><div style="font-size:13px;color:var(--muted)">${s.value}</div><div class="kv"><span>toTitleCase</span><span id="t-${i}"></span></div><div class="kv"><span>trimExtraSpaces</span><span id="m-${i}"></span></div><div class="kv"><span>wordFrequency</span><span id="f-${i}"></span></div><div style="display:flex;gap:8px;margin-top:6px"><button data-i="${i}" class="use-sample" type="button">Use</button><button data-i="${i}" class="run-sample" type="button">Run</button></div>`;
    testsEl.appendChild(div);
  });
  updateSampleSummaries();
};

const updateSampleSummaries = () => {
  samples.forEach((s,i)=>{
    document.getElementById(`t-${i}`).textContent = toTitleCase(s.value).slice(0,36) + (toTitleCase(s.value).length>36 ? '…' : '');
    document.getElementById(`m-${i}`).textContent = trimExtraSpaces(s.value).slice(0,36) + (trimExtraSpaces(s.value).length>36 ? '…' : '');
    const freq = wordFrequency(s.value);
    const top = Object.entries(freq).sort((a,b)=>b[1]-a[1]).slice(0,3).map(p=>p[0]+':'+p[1]).join(', ');
    document.getElementById(`f-${i}`).textContent = top || '-';
  });
};

const showOutput = v => { outEl.textContent = typeof v === 'object' ? JSON.stringify(v, null, 2) : String(v); };

document.getElementById('btn-title').addEventListener('click', ()=> showOutput(toTitleCase(inputEl.value)));
document.getElementById('btn-trim').addEventListener('click', ()=> showOutput(trimExtraSpaces(inputEl.value)));
document.getElementById('btn-freq').addEventListener('click', ()=> showOutput(wordFrequency(inputEl.value)));
document.getElementById('btn-mask').addEventListener('click', ()=> showOutput(maskEmail(inputEl.value)));

testsEl.addEventListener('click', e => {
  const run = e.target.closest('.run-sample');
  const use = e.target.closest('.use-sample');
  if (use) {
    const i = Number(use.dataset.i);
    inputEl.value = samples[i].value;
    selCountEl.textContent = i+1;
    inputEl.focus();
  }
  if (run) {
    const i = Number(run.dataset.i);
    const v = samples[i].value;
    const res = {
      toTitleCase: toTitleCase(v),
      trimExtraSpaces: trimExtraSpaces(v),
      wordFrequency: wordFrequency(v),
      maskEmail: maskEmail(v)
    };
    const modal = document.createElement('div');
    modal.style.position = 'fixed';
    modal.style.left = '50%';
    modal.style.top = '50%';
    modal.style.transform = 'translate(-50%,-50%)';
    modal.style.background = '#fff';
    modal.style.padding = '14px';
    modal.style.boxShadow = '0 12px 40px rgba(2,6,23,0.12)';
    modal.style.borderRadius = '10px';
    modal.style.maxWidth = '90%';
    modal.style.zIndex = 99999;
    modal.innerHTML = `<div style="font-weight:700;margin-bottom:8px">${samples[i].name} — Results</div><pre style="white-space:pre-wrap">${JSON.stringify(res, null, 2)}</pre><div style="text-align:right;margin-top:8px"><button id="close-modal">Close</button></div>`;
    document.body.appendChild(modal);
    document.getElementById('close-modal').addEventListener('click', ()=> modal.remove());
  }
});

document.getElementById('run-samples').addEventListener('click', ()=>{
  const results = samples.map(s => ({
    name: s.name,
    input: s.value,
    toTitleCase: toTitleCase(s.value),
    trimExtraSpaces: trimExtraSpaces(s.value),
    wordFrequency: wordFrequency(s.value),
    maskEmail: maskEmail(s.value)
  }));
  showOutput(results);
});

renderTests();
</script>
</body>
</html>